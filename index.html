<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>늘봄 건강 퀴즈</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
  <script>
    Kakao.init('YOUR_KAKAO_JS_KEY'); // 실제 키로 교체 필요
  </script>
  <style>
    .link-copy-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      max-width: 320px;
      height: 60px;
      margin: 24px auto 0 auto;
      background-color: #e0ede3;
      border-radius: 999px;
      color: #356c55;
      font-size: 16px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease, box-shadow 0.2s;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .link-copy-btn:hover {
      background-color: #d0e5d6;
      box-shadow: 0 4px 12px rgba(53,108,85,0.08);
    }
    .link-copy-btn img {
      width: 22px;
      height: 22px;
      vertical-align: middle;
    }
    @media (max-width: 480px) {
      .link-copy-btn {
        max-width: 95vw;
        height: 48px;
        font-size: 15px;
      }
      .link-copy-btn img {
        width: 18px;
        height: 18px;
      }
    }
    #copy-msg {
      display:none;
      color:#2e7d32;
      font-weight:bold;
      font-size:1.1em;
      margin-top:10px;
    }
    .social-share-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 16px;
    }
    
    .social-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      border-radius: 8px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.2s;
    }
    
    .social-btn:hover {
      opacity: 0.9;
    }
    
    .social-btn img {
      width: 20px;
      height: 20px;
    }
    
    .kakao-btn {
      background-color: #FEE500;
      color: #000000;
    }
    
    .facebook-btn {
      background-color: #1877F2;
      color: #FFFFFF;
    }

    .share-section {
      background: rgba(255, 255, 255, 0.9);
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      margin: 24px auto;
      max-width: 600px;
    }

    .share-title {
      color: #356c55;
      font-size: 18px;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .social-share-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 16px;
    }
    
    .social-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 16px;
      border-radius: 12px;
      border: none;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .social-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .social-btn img {
      width: 24px;
      height: 24px;
    }
    
    .kakao-btn {
      background-color: #FEE500;
      color: #000000;
    }
    
    .facebook-btn {
      background-color: #1877F2;
      color: #FFFFFF;
    }

    .instagram-btn {
      background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
      color: #FFFFFF;
    }

    .line-btn {
      background-color: #06C755;
      color: #FFFFFF;
    }

    .share-reward {
      color: #356c55;
      font-size: 14px;
      margin-top: 12px;
      font-weight: 500;
    }

    @media (max-width: 480px) {
      .social-share-buttons {
        grid-template-columns: 1fr;
      }
      
      .share-section {
        margin: 16px;
        padding: 16px;
      }
    }

    .install-btn {
      background-color: #356c55;
      color: #fff;
    }
  </style>
</head>
<body>
  <div id="install-banner" style="display:block; position:fixed; bottom:0; left:0; width:100%; background:#ffffff; padding:16px; text-align:center; z-index:9999; box-shadow:0 -2px 10px rgba(0,0,0,0.2); border-top:1px solid #eee;">
    <div style="max-width:460px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:12px;">
      <div style="flex:1; text-align:left;">
        <p style="margin:0; font-size:16px; font-weight:600; color:#356c55;">📱 앱 설치하고 더 편리하게 이용해보세요!</p>
        <p style="margin:4px 0 0; font-size:14px; color:#666;">설치하면 홈 화면에서 바로 실행할 수 있어요</p>
      </div>
      <div style="display:flex; gap:8px;">
        <button onclick="closeInstallBanner()" style="padding:8px 16px; border:none; background:#f0f0f0; border-radius:6px; color:#666; font-size:14px; cursor:pointer; font-weight:500;">닫기</button>
        <a href="https://play.google.com/store/apps/details?id=com.neulbom.neulbomquiz" target="_blank" style="padding:8px 20px; border:none; background:#356c55; border-radius:6px; color:#fff; font-size:14px; text-decoration:none; font-weight:500;">설치하기</a>
      </div>
    </div>
  </div>
  <div class="container">
    <img src="assets/img/logo.png" alt="늘봄 로고" class="logo">
    <div id="main-section">
      <div class="start-screen">
        <h1 class="main-title">나를 위한 작은 습관의 변화, 늘봄</h1>
        <p class="sub-title">오늘도 나를 돌보는 가장 쉬운 방법, 시작해볼까요?</p>
        <div style="text-align:center;">
          <div class="share-section">
            <h3 class="share-title">친구와 함께 건강한 습관 만들기</h3>
            <div class="social-share-buttons-wrapper">
              <div class="social-share-buttons">
                <button onclick="shareAppInstall()" class="social-btn install-btn">
                  <span class="install-icon-wrap"><img src="assets/img/icon-512.png" alt="앱설치" class="install-icon" /></span>
                  <span class="install-btn-text">앱 설치 링크 공유</span>
                </button>
              </div>
            </div>
            <p class="share-reward">공유하면 200P가 적립됩니다! 💚</p>
          </div>
        </div>
        <div class="points-info">
          <p class="current-points">
            💚 현재 나의 습관 포인트: <strong class="point-value" id="points">0</strong>P
          </p>
          <div class="points-guide">
            <p class="point-main-text">
              📌 <strong class="point-highlight">5,000포인트</strong>를 달성하면
              <strong>늘봄몰 적립금으로 전환</strong>할 수 있어요!
            </p>
            <p class="point-sub-text">
              환전 신청 버튼은 <strong class="point-emphasis">5,000P 이상</strong>일 때 자동으로 활성화됩니다
            </p>
          </div>
          <div id="points-action">
            <button onclick="location.href='quiz.html'" class="primary-button">
              오늘의 건강 루틴 시작하기 →
            </button>
            <button onclick="requestExchange()" id="exchange-button" class="secondary-button" style="display: none;">
              ✨ 포인트 전환 신청하기
            </button>
            <button onclick="window.open('https://smartstore.naver.com/jinjjamall', '_blank')" class="secondary-button" style="margin-top:10px;">
              🛒 늘봄식품 바로가기
            </button>
            <button onclick="goToShorts()" class="secondary-button" style="margin-top:10px;">
              🎥 1분 건강 숏츠 보러가기
            </button>
            <div id="points-insufficient" class="points-notice" style="display: none;">
              포인트가 부족합니다 😢
            </div>
          </div>
        </div>
        <div class="card-grid">
          <div class="info-card">
            <span class="emoji">✨</span>
            <h3>작은 실천</h3>
            <p>실천할수록 쌓이는 습관 포인트<br>오늘의 나를 위한 작은 투자</p>
          </div>
          <div class="info-card">
            <span class="emoji">🌱</span>
            <h3>건강한 루틴</h3>
            <p>잠깐의 여유, 나를 챙기는 습관<br>하루 한 번쯤, 나를 위한 체크타임!</p>
          </div>
          <div class="info-card">
            <span class="emoji">🎁</span>
            <h3>나를 위한 선물</h3>
            <p>건강 퀴즈로 알아보는 내 몸 사용 설명서<br>알면 지키게 되는 건강 상식!</p>
          </div>
        </div>
        <p class="footer-quote">작은 습관이, 결국 가장 멀리 갑니다</p>
      </div>
    </div>
    <div class="video-section" id="shorts-section" style="display:none;">
      <h3 class="video-title">🎥 1분 건강 숏츠</h3>
      <ul id="videoList" class="video-list"></ul>
      <button onclick="goBackMain()" class="secondary-button" style="margin-top:20px;">← 뒤로가기</button>
    </div>
  </div>

  <dialog id="videoModal" class="video-modal">
    <div id="videoPlayer"></div>
    <button onclick="document.getElementById('videoModal').close()" class="close-btn">닫기</button>
  </dialog>

  <script>
    // 스크립트 로드 확인용 코드
    console.log('인라인 스크립트 실행됨');
  </script>
  <script src="script.js" onerror="console.error('script.js 로드 실패')" onload="console.log('script.js 로드 성공')"></script>
  <script>
    // 스크립트 로드 후 실행 확인
    console.log('DOMContentLoaded 이벤트 전');
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOMContentLoaded 이벤트 발생');
      var points = parseInt(localStorage.getItem('points') || '0', 10);
      var pointsEl = document.getElementById('points');
      if (pointsEl) pointsEl.textContent = points;

      var exchangeBtn = document.getElementById('exchange-button');
      var insufficient = document.getElementById('points-insufficient');
      if (exchangeBtn && insufficient) {
        if (points >= 5000) {
          exchangeBtn.style.display = 'block';
          insufficient.style.display = 'none';
        } else {
          exchangeBtn.style.display = 'none';
          insufficient.style.display = 'block';
        }
      }
    });
  </script>
</body>
</html>
